#:kivy 2.1.0

<MainScreen>:
    drawingPlane: drawingPlane.__self__
    bottomBar: bottomBar.__self__
    rightSideBar: rightSideBar.__self__

    GridLayout:
        rows: 3
        ToolBar:
        GridLayout:
            cols: 3
            LeftSideBar:
            DrawRegion:
                drawingPlane: drawingPlane
                DrawingPlane:
                    id: drawingPlane
                    mainScreen: root
            RightSideBar:
                id: rightSideBar
        BottomBar:
            id: bottomBar
            mainScreen: root

<ToolBar>:
    size_hint: (1, None)
    height: 18
    canvas:
        Color:
            rgb: .7, .7, .7
        Rectangle:
            size: self.size
            pos: self.pos

<DrawRegion>:
    canvas:
        Color:
            rgb: .16, .12, .12
        Rectangle:
            size: self.size
            pos: self.pos

    WidgetBorder:
        border_color: .4, .6, .4, 1
        opacity: 1

<DrawingPlane>:
    id: drawingPlane
    size_hint: (None, None)
    width: max(backgroundImage.width, root.width, 2200)
    height: max(backgroundImage.height, root.height, 1600)

    do_rotation: False
    borderVisible: False

    backgroundImage: backgroundImage.__self__

    WidgetBorder:
        border_color: .8, .8, .2, 1
        opacity: int(root.borderVisible)

    Image:
        id: backgroundImage
        size_hint: (None, None)
        pos_hint: {"center_x": .5, "center_y": .5}

        size: self.texture_size
        source: "pic2.jpg"
        color: [1, 1, 1, 0.4]

        WidgetBorder:
            border_color: .2, .8, .8, .2
            opacity: int(root.borderVisible)


<WidgetBorder>:
    border_width: 5
    cross_width: 3
    border_color: .8, .2, .2, 1

    opacity: 0

    size_hint: (None, None)
    size: self.parent.size
    pos: self.parent.pos
    
    canvas:
        Color:
            rgba: self.border_color
        Line:
            width: self.border_width
            points: self.x, self.y, self.x + self.width, self.y
        Line:
            width: self.border_width
            points: self.x, self.y, self.x, self.y + self.height 
        Line:
            width: self.border_width
            points: self.x, self.y + self.height, self.x + self.width, self.y + self.height
        Line:
            width: self.border_width
            points: self.x + self.width, self.y, self.x + self.width, self.y + self.height
        Line:
            width: self.cross_width
            points: self.x + self.width/2, self.y, self.x + self.width/2, self.y + self.height
        Line:
            width: self.cross_width
            points: self.x, self.y+self.height/2, self.x + self.width, self.y+self.height/2