#:kivy 2.1.0

<MainScreen>:
    drawingPlane: drawingPlane.__self__
    bottomBar: bottomBar.__self__

    GridLayout:
        rows:2
        ToolBar:
        GridLayout:
            cols: 3
            LeftSideBar:
            GridLayout:
                rows: 2
                DrawRegion:
                    DrawingPlane:
                        id: drawingPlane
                        mainScreen: root
                BottomBar:
                    id: bottomBar
                    mainScreen: root
            RightSideBar:

<ToolBar>:
    size_hint: (1, None)
    height: 18
    canvas:
        Color:
            rgb: .7, .7, .7
        Rectangle:
            size: self.size
            pos: self.pos

<DrawRegion>:
    canvas:
        Color:
            rgb: .16, .12, .12
        Rectangle:
            size: self.size
            pos: self.pos

<DrawingPlane>:
    id: scatterLayout
    size_hint: (None, None)
    width: max(backgroundImage.width, root.width, 3000)
    height: max(backgroundImage.height, root.height, 2000)

    pos_x: (self.width/2 - self.parent.pos[0] - self.parent.width/2)
    pos_y: (self.height/2 - self.parent.pos[1] - self.parent.height/2)
    pos: (-self.pos_x, -self.pos_y)

    do_rotation: False
    # do_translation_y: False
    borderVisible: False

    backgroundImage: backgroundImage.__self__

    WidgetBorder:
        border_color: .8, .8, .2, 1
        opacity: 1

        canvas.after:
            Color:
                rgba: .4, .4, .4, .4
            Rectangle:
                size: self.size
                pos: self.pos
        # opacity: int(root.borderVisible)

    Image:
        id: backgroundImage
        size_hint: (None, None)
        pos_hint: {"center_x": .5, "center_y": .5}

        size: self.texture_size
        source: "pic2.jpg"
        color: [1, 1, 1, 0.4]

        WidgetBorder:
            border_color: .2, .8, .8, .2
            opacity: int(root.borderVisible)


<WidgetBorder>:
    border_width: 5
    cross_width: 3
    border_color: .8, .2, .2, 1

    opacity: 0

    size_hint: (None, None)
    size: self.parent.size
    pos: self.parent.pos
    canvas:
        Color:
            rgba: self.border_color
        Line:
            width: self.border_width
            rectangle: self.x, self.y, self.width, self.height
        Line:
            width: self.cross_width
            points: self.x + self.width/2, self.y, self.x + self.width/2, self.y + self.height
        Line:
            width: self.cross_width
            points: self.x, self.y+self.height/2, self.x + self.width, self.y+self.height/2